# Changli OJ V2 重构开发看板

更新时间：2026-03-01  
分支：`rebuild/v2-mvp`

## 1. 重构目标（只做 V1）

1. 一个后台统一管理题库。
2. 一个用户端先跑通 H5（后续再扩小程序）。
3. 核心链路稳定：注册/登录 -> 刷题 -> 错题 -> 进度。
4. 上传发布稳定：批量导入 -> 编辑 -> 发布。

## 2. 技术决策（当前）

1. 旧分支冻结为遗留，不再新增功能。
2. 新分支按“先可用，再优化”推进。
3. 优先复用成熟开源架构思路（多端 + 管理后台 + API 分离）。
4. 商业化前提：代码许可合规 + 题库内容版权合规。

## 3. 一周落地计划（目标导向）

### Day 1：骨架初始化

- [ ] 固化目录结构（`apps/web` `apps/admin` `apps/api` 或等价结构）
- [ ] 跑通本地开发（固定端口 + 环境变量模板）
- [ ] 接入 Supabase Auth（注册/登录/忘记密码）

### Day 2：题库模型与管理端

- [ ] 建表/模型：`quizzes` `questions` `jobs`
- [ ] 管理端题库列表与详情
- [ ] 上传入口（支持 `.txt/.md`）

### Day 3：解析与发布

- [ ] 解析任务入队
- [ ] 解析结果可编辑
- [ ] 发布/下架可切换

### Day 4：用户端刷题闭环

- [ ] 题库广场（仅已发布）
- [ ] 刷题页（单题作答）
- [ ] 进度保存与续学

### Day 5：错题与回归

- [ ] 错题本读写
- [ ] 角色权限回归（user/developer/root）
- [ ] 冒烟测试脚本沉淀

### Day 6-7：上线准备

- [ ] 域名/备案前置准备
- [ ] SMTP 和找回密码邮件送达验证
- [ ] 线上环境最小发布

## 4. 批量发布体验设计（几百题场景）

1. 必须支持“批量导入 + 批量校验 + 批量发布”。
2. 必须有“导入预览页”：导入后先看错误，不直接入库。
3. 必须支持“错误行定位”和“局部修复后二次提交”。
4. 必须支持“按题号/关键词检索”快速校对。
5. 发布应支持“整套发布”和“增量发布（仅变更题）”。

> 判断标准：300-500 题单次导入后，运营 15 分钟内可以完成校验并发布。

## 5. 本周完成定义（DoD）

1. 注册/登录/忘记密码可用。
2. 上传-解析-编辑-发布闭环可用。
3. 用户刷题-进度-错题闭环可用。
4. 关键流程有回归脚本可复跑。
5. 文档齐全并可让新同学当天接手。

## 6. 暂不做（避免失控）

1. 全程 AI 陪伴多轮对话。
2. OCR 自动识别引擎内置。
3. 复杂 BI 数据中台。
4. 复杂租户体系/学校组织架构。
