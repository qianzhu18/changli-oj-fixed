# æ™ºèƒ½é¢˜åº“ç³»ç»Ÿ - éƒ¨ç½²ä¸å¼€å‘æŒ‡å—

> ç‰ˆæœ¬ï¼šv2.1.0  
> æ›´æ–°æ—¶é—´ï¼š2025-07-24

## ğŸ“‹ ç›®å½•

- [ğŸ—ï¸ ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ğŸ’» æœ¬åœ°å¼€å‘](#æœ¬åœ°å¼€å‘)
- [ğŸ³ Dockeréƒ¨ç½²](#dockeréƒ¨ç½²)
- [ğŸŒ ç”Ÿäº§éƒ¨ç½²](#ç”Ÿäº§éƒ¨ç½²)
- [ğŸ”§ é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [ğŸ› ï¸ æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## ğŸ—ï¸ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (Next.js) â”‚  åç«¯ (Express)  â”‚   æ•°æ®åº“å±‚        â”‚
â”‚                 â”‚                 â”‚                 â”‚
â”‚ â€¢ React 19      â”‚ â€¢ Node.js 18+   â”‚ â€¢ MongoDB 7.0   â”‚
â”‚ â€¢ TypeScript    â”‚ â€¢ TypeScript    â”‚ â€¢ Redis 7.2     â”‚
â”‚ â€¢ Tailwind CSS  â”‚ â€¢ JWT è®¤è¯      â”‚                 â”‚
â”‚ â€¢ Radix UI      â”‚ â€¢ AI é›†æˆ       â”‚                 â”‚
â”‚                 â”‚ â€¢ æ–‡ä»¶è§£æ      â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆè¯¦æƒ…

**å‰ç«¯æŠ€æœ¯æ ˆ**
- âš›ï¸ **Next.js 15.2.4** - React æ¡†æ¶
- ğŸ¨ **Tailwind CSS** - æ ·å¼æ¡†æ¶
- ğŸ§© **Radix UI** - æ— éšœç¢ç»„ä»¶åº“
- ğŸ“ **TypeScript** - ç±»å‹å®‰å…¨
- ğŸ­ **å¢¨éšä¾ è¸ªä¸»é¢˜** - è‡ªå®šä¹‰UIè®¾è®¡

**åç«¯æŠ€æœ¯æ ˆ**
- ğŸš€ **Express.js** - Web æ¡†æ¶
- ğŸ” **JWT** - èº«ä»½è®¤è¯
- ğŸ¤– **Google AI** - æ™ºèƒ½è§£æ
- ğŸ“„ **æ–‡ä»¶è§£æ** - æ”¯æŒå¤šç§æ ¼å¼
- ğŸ”’ **å®‰å…¨ä¸­é—´ä»¶** - é˜²æŠ¤æœºåˆ¶

**æ•°æ®åº“ä¸ç¼“å­˜**
- ğŸƒ **MongoDB** - ä¸»æ•°æ®åº“
- âš¡ **Redis** - ç¼“å­˜ç³»ç»Ÿ
- ğŸ“Š **æ•°æ®æŒä¹…åŒ–** - Docker volumes

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

```bash
# å¿…éœ€è½¯ä»¶
- Node.js >= 18.0.0
- Docker >= 20.10.0
- Docker Compose >= 2.0.0

# å¯é€‰è½¯ä»¶
- Git
- VS Code (æ¨è)
```

### ä¸€é”®éƒ¨ç½²

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd åˆ·é¢˜ç½‘ç«™å¼€å‘

# 2. ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# 3. å¼€å‘ç¯å¢ƒéƒ¨ç½²
./deploy.sh start dev

# 4. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
./deploy.sh start prod
```

### éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
./deploy.sh status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./deploy.sh logs
```

---

## ğŸ’» æœ¬åœ°å¼€å‘

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# 1. å¯åŠ¨æ•°æ®åº“æœåŠ¡
./deploy.sh start dev

# 2. å®‰è£…å‰ç«¯ä¾èµ–
cd study-app
npm install

# 3. å®‰è£…åç«¯ä¾èµ–
cd ../backend
npm install

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
# ç»ˆç«¯1 - åç«¯
cd backend
npm run dev

# ç»ˆç«¯2 - å‰ç«¯
cd study-app
npm run dev
```

### å¼€å‘æœåŠ¡å™¨åœ°å€

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ | http://localhost:3000 | Next.js å¼€å‘æœåŠ¡å™¨ |
| åç«¯ | http://localhost:3001 | Express.js API æœåŠ¡å™¨ |
| æ•°æ®åº“ | mongodb://localhost:27017 | MongoDB æ•°æ®åº“ |
| ç¼“å­˜ | redis://localhost:6379 | Redis ç¼“å­˜æœåŠ¡ |

### å¼€å‘å·¥å…·é…ç½®

**VS Code æ‰©å±•æ¨è**
```json
{
  "recommendations": [
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-eslint",
    "ms-vscode-remote.remote-containers"
  ]
}
```

**ä»£ç æ ¼å¼åŒ–é…ç½®**
```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "tailwindCSS.experimental.classRegex": [
    ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"],
    ["cx\\(([^)]*)\\)", "(?:'|\"|`)([^']*)(?:'|\"|`)"]
  ]
}
```

---

## ğŸ³ Dockeréƒ¨ç½²

### Docker Compose æœåŠ¡

```yaml
services:
  frontend:    # Next.js å‰ç«¯
  backend:     # Express.js åç«¯
  mongo:       # MongoDB æ•°æ®åº“
  redis:       # Redis ç¼“å­˜
  nginx:       # åå‘ä»£ç† (å¯é€‰)
```

### éƒ¨ç½²å‘½ä»¤

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f [service_name]

# åœæ­¢æœåŠ¡
docker-compose down

# é‡æ–°æ„å»º
docker-compose build --no-cache
```

### æ•°æ®æŒä¹…åŒ–

```bash
# æ•°æ®å·ä½ç½®
/var/lib/docker/volumes/
â”œâ”€â”€ quiz_mongo_data/     # MongoDB æ•°æ®
â””â”€â”€ quiz_redis_data/     # Redis æ•°æ®

# æ•°æ®å¤‡ä»½
docker exec quiz_mongo mongodump --out /backup
docker cp quiz_mongo:/backup ./mongodb-backup

# æ•°æ®æ¢å¤
docker cp ./mongodb-backup quiz_mongo:/restore
docker exec quiz_mongo mongorestore /restore
```

---

## ğŸŒ ç”Ÿäº§éƒ¨ç½²

### æœåŠ¡å™¨é…ç½®è¦æ±‚

**æœ€ä½é…ç½®**
- CPU: 2 æ ¸å¿ƒ
- å†…å­˜: 4GB RAM
- å­˜å‚¨: 20GB SSD
- ç³»ç»Ÿ: Ubuntu 20.04+

**æ¨èé…ç½®**
- CPU: 4 æ ¸å¿ƒ
- å†…å­˜: 8GB RAM
- å­˜å‚¨: 50GB SSD
- ç³»ç»Ÿ: Ubuntu 22.04 LTS

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ­¥éª¤

```bash
# 1. æœåŠ¡å™¨åˆå§‹åŒ–
sudo apt update && sudo apt upgrade -y
sudo apt install docker.io docker-compose git curl -y

# 2. é…ç½®é˜²ç«å¢™
sudo ufw allow 22,80,443,3000,3001/tcp
sudo ufw --force enable

# 3. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd åˆ·é¢˜ç½‘ç«™å¼€å‘

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp backend/.env.example backend/.env
# ç¼–è¾‘ backend/.env æ–‡ä»¶

# 5. ç”Ÿäº§éƒ¨ç½²
./deploy.sh start prod
```

### SSL/HTTPS é…ç½®

```bash
# 1. å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx -y

# 2. è·å– SSL è¯ä¹¦
sudo certbot --nginx -d yourdomain.com

# 3. è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ : 0 12 * * * /usr/bin/certbot renew --quiet
```

### ç›‘æ§ä¸æ—¥å¿—

```bash
# ç³»ç»Ÿç›‘æ§
htop              # å®æ—¶ç³»ç»ŸçŠ¶æ€
df -h             # ç£ç›˜ä½¿ç”¨æƒ…å†µ
free -h           # å†…å­˜ä½¿ç”¨æƒ…å†µ

# åº”ç”¨ç›‘æ§
./deploy.sh status # å®¹å™¨çŠ¶æ€
./deploy.sh logs   # åº”ç”¨æ—¥å¿—

# æ—¥å¿—è½®è½¬
sudo logrotate /etc/logrotate.d/docker
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

**åç«¯é…ç½® (`backend/.env`)**
```env
# åŸºç¡€é…ç½®
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# æ•°æ®åº“
MONGODB_URI=mongodb://mongo:27017/quiz-system
REDIS_URL=redis://:password@redis:6379

# è®¤è¯
JWT_SECRET=your-super-secret-key
JWT_EXPIRE=7d

# AI æœåŠ¡
GOOGLE_AI_API_KEY=your-google-ai-key

# é‚®ä»¶æœåŠ¡
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# å®‰å…¨é…ç½®
CORS_ORIGIN=https://yourdomain.com
RATE_LIMIT_MAX_REQUESTS=100
```

**å‰ç«¯é…ç½® (`study-app/.env.local`)**
```env
# API é…ç½®
NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_NAME=æ™ºèƒ½é¢˜åº“ç³»ç»Ÿ
NEXT_PUBLIC_APP_VERSION=1.0.0
```

### æ•°æ®åº“é…ç½®

**MongoDB ç´¢å¼•ä¼˜åŒ–**
```javascript
// åœ¨ MongoDB ä¸­æ‰§è¡Œ
db.users.createIndex({ email: 1 }, { unique: true })
db.quizzes.createIndex({ userId: 1, createdAt: -1 })
db.questions.createIndex({ quizId: 1 })
db.sessions.createIndex({ userId: 1, createdAt: -1 })
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**é—®é¢˜1: å‰ç«¯æ— æ³•è¿æ¥åç«¯**
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl http://localhost:3001/health

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# æ£€æŸ¥å®¹å™¨æ—¥å¿—
docker-compose logs backend
```

**é—®é¢˜2: æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥ MongoDB çŠ¶æ€
docker-compose logs mongo

# é‡å¯æ•°æ®åº“
docker-compose restart mongo

# æŸ¥çœ‹è¿æ¥å­—ç¬¦ä¸²
echo $MONGODB_URI
```

**é—®é¢˜3: æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la backend/uploads/

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æŸ¥çœ‹ä¸Šä¼ æ—¥å¿—
docker-compose logs backend | grep upload
```

**é—®é¢˜4: AI è§£æå¤±è´¥**
```bash
# æ£€æŸ¥ API å¯†é’¥
curl -H "Authorization: Bearer $GOOGLE_AI_API_KEY" \
  https://generativelanguage.googleapis.com/v1/models

# æŸ¥çœ‹è§£ææ—¥å¿—
docker-compose logs backend | grep "ai\|parse"
```

### æ€§èƒ½ä¼˜åŒ–

**å‰ç«¯ä¼˜åŒ–**
```bash
# æ„å»ºä¼˜åŒ–
npm run build && npm run start

# åˆ†æ bundle å¤§å°
npm install --save-dev @next/bundle-analyzer
```

**åç«¯ä¼˜åŒ–**
```bash
# å¯ç”¨å‹ç¼©
NODE_ENV=production npm start

# ç›‘æ§å†…å­˜ä½¿ç”¨
node --max-old-space-size=4096 dist/index.js
```

**æ•°æ®åº“ä¼˜åŒ–**
```bash
# åˆ†ææ…¢æŸ¥è¯¢
db.setProfilingLevel(2, { slowms: 100 })
db.system.profile.find().sort({ ts: -1 }).limit(5)

# æ¸…ç†æ—¥å¿—
db.runCommand({ "logRotate": 1 })
```

### è°ƒè¯•å·¥å…·

**å‰ç«¯è°ƒè¯•**
```bash
# React Developer Tools
# Next.js è°ƒè¯•ä¿¡æ¯
DEBUG=* npm run dev
```

**åç«¯è°ƒè¯•**
```bash
# è¯¦ç»†æ—¥å¿—
LOG_LEVEL=debug npm run dev

# æ€§èƒ½åˆ†æ
node --inspect dist/index.js

# å†…å­˜æ³„æ¼æ£€æµ‹
node --trace-warnings dist/index.js
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **æ—¥å¿—æ–‡ä»¶**: `./deploy.sh logs [service]`
2. **ç³»ç»ŸçŠ¶æ€**: `./deploy.sh status`
3. **é…ç½®æ–‡ä»¶**: ç¡®è®¤ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®
4. **ç½‘ç»œè¿æ¥**: éªŒè¯ç«¯å£å’Œé˜²ç«å¢™è®¾ç½®

**è”ç³»æ–¹å¼**
- ğŸ“§ æŠ€æœ¯æ”¯æŒ: support@example.com
- ğŸ“š æ–‡æ¡£åœ°å€: https://docs.example.com
- ğŸ› é—®é¢˜åé¦ˆ: https://github.com/example/issues

---

*Â© 2025 åƒé€æ•°å­—èµ„äº§. ä¿ç•™æ‰€æœ‰æƒåˆ©.* 